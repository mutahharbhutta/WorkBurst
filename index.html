<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Stay organized and never miss a deadline with WorkBurst task management system">
  <meta name="theme-color" content="#6366f1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="WorkBurst">
  
  <title>WorkBurst - Task Manager</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-152x152.png">
  <link rel="icon" type="image/png" href="icons/icon-72x72.png">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Preloader -->
  <div class="preloader" id="preloader">
    <div class="loader-animation">
      <div class="loader-spinner"></div>
      <div class="loader-text">Loading your tasks...</div>
      <div class="loader-tip" id="loaderTip">Stay organized, stay ahead</div>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="nav-brand">WorkBurst</a>
      
      <div class="nav-menu">
        <button id="timetableBtn" class="nav-btn secondary">Timetable</button>
        <div class="theme-selector">
          <button id="themeBtn" class="theme-toggle" aria-label="Change theme">üé®</button>
          <div class="theme-dropdown" id="themeDropdown">
            <button data-theme="darkest">Darkest Black</button>
            <button data-theme="classic">Classic</button>
            <button data-theme="modern">Modern</button>
            <button data-theme="chalkboard">Chalkboard</button>
            <button data-theme="notebook">Notebook</button>
          </div>
        </div>
        <button id="loginBtn" class="nav-btn primary">Admin</button>
        <button id="logoutBtn" class="nav-btn danger admin-only">Logout</button>
      </div>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container">
    <!-- PWA Install Banner -->
    <div id="installBanner" class="install-banner" style="display: none;">
      <div class="install-content">
        <div class="install-icon">üì±</div>
        <div class="install-text">
          <strong>Install WorkBurst</strong>
          <p>Add to home screen for offline access</p>
        </div>
      </div>
      <div class="install-actions">
        <button id="installBtn" class="btn primary">Install</button>
        <button id="dismissInstall" class="btn secondary">Later</button>
      </div>
    </div>

    <!-- Hero Section -->
    <div class="hero">
      <h2>Task Management</h2>
      <p>Stay organized and never miss a deadline</p>
      <div class="last-updated" id="lastUpdated">
        <span class="update-icon"></span>
        <span id="updateTime">No updates yet</span>
      </div>
    </div>

    <!-- Filters -->
    <div class="toolbar">
      <div class="search-wrapper">
        <span class="search-icon">üîç</span>
        <input id="search" class="input" placeholder="Search tasks..." />
      </div>
      <div class="select-wrapper">
        <select id="filterType" class="input">
          <option value="all">All Types</option>
          <option>Assignment</option>
          <option>Quiz</option>
          <option>Lab</option>
        </select>
      </div>
    </div>

    <!-- Tasks Section -->
    <section>
      <div id="emptyState" class="empty-state" style="display:none;">
        <div class="icon">üî≠</div>
        <h3>No tasks found</h3>
        <p>Try adjusting your filters or add a new task</p>
      </div>
      
      <div id="weeklyTasks"></div>
    </section>

    <!-- Admin Panel -->
    <section class="admin-section admin-only">
      <h2 class="section-title">Admin Panel</h2>
      
      <!-- Notification Settings -->
      <div class="notification-settings">
        <h3>Notifications</h3>
        <label class="checkbox-label">
          <input type="checkbox" id="enableNotifications" />
          <span>Enable notifications (12 hours before deadline)</span>
        </label>
      </div>

      <form id="itemForm" autocomplete="off">
        <input type="hidden" id="itemId" />
        
        <div class="field">
          <label>Type</label>
          <select id="type" class="input" required>
            <option>Assignment</option>
            <option>Quiz</option>
            <option>Lab</option>
          </select>
        </div>

        <div class="field">
          <label>Course</label>
          <input id="course" class="input" placeholder="Course name" required />
        </div>

        <div class="field full">
          <label>Title</label>
          <input id="title" class="input" placeholder="Task title" required />
        </div>

        <div class="field">
          <label>Due Date</label>
          <input id="dueDate" type="date" class="input" required />
        </div>

        <div class="field">
          <label>Due Time</label>
          <input id="dueTime" type="time" class="input" />
        </div>

        <div class="field full">
          <label>Link (optional)</label>
          <input id="link" class="input" placeholder="https://..." />
        </div>

        <div class="field full">
          <label>Notes (optional)</label>
          <textarea id="notes" class="input textarea" placeholder="Task details..." rows="4"></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn primary">Save Task</button>
          <button type="button" id="resetBtn" class="btn secondary">Clear</button>
          <button type="button" id="deleteBtn" class="btn danger" style="display:none;">Delete</button>
        </div>
      </form>

      <div class="table-wrapper">
        <table class="table">
          <thead>
            <tr>
              <th>Type</th>
              <th>Course</th>
              <th>Title</th>
              <th>Due</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="adminTbody"></tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- Task Modal (Expanded View) -->
  <div class="task-modal" id="taskModal">
    <div class="task-modal-content">
      <button class="task-modal-close" id="closeTaskModal">√ó</button>
      <div id="taskModalBody"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p>Developed by <a href="https://github.com/mutahharbhutta" target="_blank" rel="noopener" class="animated-name">Mutahhar Bhutta</a> | ¬© 2025</p>
      <p>Crafted with <span class="heart">‚ù§</span></p>
      <p><a href="https://mutahharbhutta.github.io/pucit-cgpa-calculator/" target="_blank" rel="noopener">PUCIT GPA/CGPA Calculator</a> | <a href="https://github.com/mutahharbhutta/WorkBurst" target="_blank" rel="noopener">GitHub</a></p>
    </div>
  </footer>

  <!-- Login Dialog -->
  <dialog id="loginDialog">
    <h3>Admin Login</h3>
    <p>Use your Firebase credentials to access admin features.</p>
    <input id="email" class="input" placeholder="Email" type="email" />
    <input id="password" type="password" class="input" placeholder="Password" />
    <div class="dialog-actions">
      <button class="btn secondary" id="cancelLogin">Cancel</button>
      <button class="btn primary" id="confirmLogin">Log In</button>
    </div>
  </dialog>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/12.3.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.3.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore-compat.js"></script>

  <script src="app.js"></script>
</body>
</html>